# 一、数学基础

## 1.经典视觉SLAM框架

![image-20220830112452391](SLAM&SFM.assets/image-20220830112452391.png)

![image-20220830112516424](SLAM&SFM.assets/image-20220830112516424.png)

## 2.三维空间刚体运动

### 2.1旋转矩阵

#### 向量表示

![image-20220830144122278](SLAM&SFM.assets/image-20220830144122278.png)

![image-20220830144154476](SLAM&SFM.assets/image-20220830144154476.png)

#### 内积

![image-20220830144222111](SLAM&SFM.assets/image-20220830144222111.png)

#### 外积

![image-20220830144300220](SLAM&SFM.assets/image-20220830144300220.png)

![image-20220830144435401](SLAM&SFM.assets/image-20220830144435401.png)

![image-20220830144635705](SLAM&SFM.assets/image-20220830144635705.png)

#### 坐标系间的欧式变换

![image-20220830145130748](SLAM&SFM.assets/image-20220830145130748.png)

![image-20220830145156321](SLAM&SFM.assets/image-20220830145156321.png)

![image-20220830145245274](SLAM&SFM.assets/image-20220830145245274.png)

#### 旋转矩阵

它是一个行列式为1的正交矩阵，正交矩阵即逆为自身转置的矩阵。反之，行列式为1的正交矩阵也是一个旋转矩阵。因此，旋转矩阵的集合定义如下：

![image-20220830145558372](SLAM&SFM.assets/image-20220830145558372.png)

![image-20220830145625083](SLAM&SFM.assets/image-20220830145625083.png)

通过旋转矩阵，我们可以直接讨论两个坐标系之间的旋转变换，换句话说，旋转矩阵可以描述相机的旋转。

由于旋转矩阵为正交阵，它的逆(即转置)描述了一个相反的旋转，有：

![image-20220830145816360](SLAM&SFM.assets/image-20220830145816360.png)

把旋转和平移合到一起，有：

![image-20220830145914137](SLAM&SFM.assets/image-20220830145914137.png)

![image-20220830145925403](SLAM&SFM.assets/image-20220830145925403.png)

#### 变换矩阵与齐次坐标

![image-20220830150125586](SLAM&SFM.assets/image-20220830150125586.png)

![image-20220830150236883](SLAM&SFM.assets/image-20220830150236883.png)

#### 矩阵Cholesky分解及求解线性方程组

https://blog.csdn.net/xbinworld/article/details/104663481

### 2.2旋转向量和欧拉角

#### 旋转向量

任意旋转都可以用一个旋转轴和一个旋转角来刻画。我们可以使用一个向量，其方向与旋转轴一致，而长度等于旋转角，这种向量，称为旋转向量(或轴角，Axis-Angle)。

假设有一个旋转轴为n，角度为![image-20220830162920045](SLAM&SFM.assets/image-20220830162920045.png)，显示，它对应的旋转向量为![image-20220830162943786](SLAM&SFM.assets/image-20220830162943786.png)。由旋转向量到旋转矩阵的过程由罗德里格斯公式(Rodrigues's Formula)表面，

![image-20220830163038493](SLAM&SFM.assets/image-20220830163038493.png)

推导过程：https://blog.csdn.net/renhaofan/article/details/103706544

![image-20220830163413293](SLAM&SFM.assets/image-20220830163413293.png)

tr()是取迹

![image-20220830163533399](SLAM&SFM.assets/image-20220830163533399.png)

#### 欧拉角

定义一个刚体的前方为X轴，右侧为Y轴，上方为Z轴，则有：

![image-20220830164204893](SLAM&SFM.assets/image-20220830164204893.png)

![image-20220830164306017](SLAM&SFM.assets/image-20220830164306017.png)

![image-20220830164520322](SLAM&SFM.assets/image-20220830164520322.png)

![image-20220830174043815](SLAM&SFM.assets/image-20220830174043815.png)

#### 四元数

四元数是Hamilton找到一种扩展的复数。它既是紧凑的，也没有奇异性。

![image-20220830174423296](SLAM&SFM.assets/image-20220830174423296.png)

![image-20220830174447234](SLAM&SFM.assets/image-20220830174447234.png)

![image-20220830191857143](SLAM&SFM.assets/image-20220830191857143.png)

![image-20220830191949986](SLAM&SFM.assets/image-20220830191949986.png)

![image-20220830192156813](SLAM&SFM.assets/image-20220830192156813.png)

![image-20220830192317700](SLAM&SFM.assets/image-20220830192317700.png)

![image-20220830192344087](SLAM&SFM.assets/image-20220830192344087.png)

![image-20220830192814786](SLAM&SFM.assets/image-20220830192814786.png)

#### 四元数到旋转矩阵的转换

![image-20220830193039096](SLAM&SFM.assets/image-20220830193039096.png)

#### 相似、仿射、射影变换

欧式变换：保持了向量的长度和夹角，相当于我们把一个刚体原封不动地进行移动或旋转，不改变它自身的样子。

##### 1.相似变换

![image-20220830193410962](SLAM&SFM.assets/image-20220830193410962.png)

##### 2.仿射变换

![image-20220830193448960](SLAM&SFM.assets/image-20220830193448960.png)

##### 3.射影变换

![image-20220830193556511](SLAM&SFM.assets/image-20220830193556511.png)

![image-20220830193649794](SLAM&SFM.assets/image-20220830193649794.png)

#### Eigen相关变量

![image-20220831113846449](SLAM&SFM.assets/image-20220831113846449.png)

## 3.李群与李代数

#### 3.1李群李代数基础

![image-20220831144953106](SLAM&SFM.assets/image-20220831144953106.png)

![image-20220831145021147](SLAM&SFM.assets/image-20220831145021147.png)

##### 3.1.1群

![image-20220831145142229](SLAM&SFM.assets/image-20220831145142229.png)

旋转矩阵集合和矩阵乘法构成群，变换矩阵和矩阵乘法也构成群。

矩阵中常见的群有：

![image-20220831145427334](SLAM&SFM.assets/image-20220831145427334.png)

![image-20220831145523131](SLAM&SFM.assets/image-20220831145523131.png)

##### 3.1.2李代数的引出

![image-20220831150157673](SLAM&SFM.assets/image-20220831150157673.png)

![image-20220831150224800](SLAM&SFM.assets/image-20220831150224800.png)

![image-20220831150241723](SLAM&SFM.assets/image-20220831150241723.png)

##### 3.1.3李代数的定义

![image-20220831150441287](SLAM&SFM.assets/image-20220831150441287.png)

自反性是指自己与自己的运算为零。其中二次运算被称为李括号。三维向量![image-20220831150647523](SLAM&SFM.assets/image-20220831150647523.png)上定义的叉积 x 是一种李括号，因此![image-20220831150737247](SLAM&SFM.assets/image-20220831150737247.png)构成了一个李代数。

##### 3.1.4李代数so(3)

![image-20220831151013832](SLAM&SFM.assets/image-20220831151013832.png)

![image-20220831151108621](SLAM&SFM.assets/image-20220831151108621.png)

李代数是由一个三维向量组成的集合，每个向量对应到一个反对称矩阵，可以表达旋转矩阵的导数。

![image-20220831151218016](SLAM&SFM.assets/image-20220831151218016.png)

##### 3.1.5李代数se(3)

se(3)位于![image-20220831151531377](SLAM&SFM.assets/image-20220831151531377.png)空间中：

![image-20220831151551285](SLAM&SFM.assets/image-20220831151551285.png)

![image-20220831151622668](SLAM&SFM.assets/image-20220831151622668.png)

![image-20220831151733636](SLAM&SFM.assets/image-20220831151733636.png)

#### 3.2指数与对数映射

##### 3.2.1 SO(3)上的指数映射

![image-20220831151944328](SLAM&SFM.assets/image-20220831151944328.png)是一个矩阵的指数，在李群和李代数中，称为指数映射(Exponential Map)。

![image-20220831152106276](SLAM&SFM.assets/image-20220831152106276.png)

![image-20220831152453475](SLAM&SFM.assets/image-20220831152453475.png)

![image-20220831153240036](SLAM&SFM.assets/image-20220831153240036.png)

![image-20220831153712336](SLAM&SFM.assets/image-20220831153712336.png)

##### 3.2.2 SE(3)上的指数映射

![image-20220831153818312](SLAM&SFM.assets/image-20220831153818312.png)

![image-20220831154022573](SLAM&SFM.assets/image-20220831154022573.png)

![image-20220831154239139](SLAM&SFM.assets/image-20220831154239139.png)

#### 3.3 李代数求导与扰动模型

##### 3.3.1 BCH公式与近似形式

![image-20220831155721453](SLAM&SFM.assets/image-20220831155721453.png)

![image-20220831160055558](SLAM&SFM.assets/image-20220831160055558.png)

##### 3.3.2 SO(3)李代数上的求导

![image-20220831160220352](SLAM&SFM.assets/image-20220831160220352.png)

![image-20220831160440120](SLAM&SFM.assets/image-20220831160440120.png)

##### 3.3.3 李代数求导

![image-20220831160553722](SLAM&SFM.assets/image-20220831160553722.png)

![image-20220831160905345](SLAM&SFM.assets/image-20220831160905345.png)

##### 3.3.4 扰动模型(左乘)

![image-20220831161616347](SLAM&SFM.assets/image-20220831161616347.png)

![image-20220831161726144](SLAM&SFM.assets/image-20220831161726144.png)

##### 3.3.5 SE(3)上的李代数求导

![image-20220831162507885](SLAM&SFM.assets/image-20220831162507885.png)

#### 3.4 相似变换群与李代数

![image-20220902163334947](SLAM&SFM.assets/image-20220902163334947.png)

![image-20220902163630663](SLAM&SFM.assets/image-20220902163630663.png)

![image-20220902163734839](SLAM&SFM.assets/image-20220902163734839.png)



# 二、SLAM & SFM技术篇

## 4.相机与图像

### 4.1 相机模型

![image-20221020164859669](SLAM&SFM.assets/image-20221020164859669.png)

#### 4.1.1 针孔相机模型

![image-20221020165817947](SLAM&SFM.assets/image-20221020165817947.png)

![image-20221020165837291](SLAM&SFM.assets/image-20221020165837291.png)

![image-20221020165902091](SLAM&SFM.assets/image-20221020165902091.png)

![image-20221020170047374](SLAM&SFM.assets/image-20221020170047374.png)

![image-20221020170342131](SLAM&SFM.assets/image-20221020170342131.png)

![image-20221020170729552](SLAM&SFM.assets/image-20221020170729552.png)

#### 4.1.2 畸变

![image-20221020170844631](SLAM&SFM.assets/image-20221020170844631.png)

![image-20221020171733519](SLAM&SFM.assets/image-20221020171733519.png)

![image-20221020172450660](SLAM&SFM.assets/image-20221020172450660.png)

![image-20221020172646550](SLAM&SFM.assets/image-20221020172646550.png)

![image-20221020172817606](SLAM&SFM.assets/image-20221020172817606.png)

#### 4.1.3 双目相机模型

![image-20221020172853502](SLAM&SFM.assets/image-20221020172853502.png)

![image-20221020172935889](SLAM&SFM.assets/image-20221020172935889.png)

![image-20221020173126230](SLAM&SFM.assets/image-20221020173126230.png)

![image-20221020173305669](SLAM&SFM.assets/image-20221020173305669.png)

![image-20221020193445909](SLAM&SFM.assets/image-20221020193445909.png)

#### 4.1.4 RGB-D 相机模型

![image-20221020193652661](SLAM&SFM.assets/image-20221020193652661.png)

![image-20221020193805725](SLAM&SFM.assets/image-20221020193805725.png)

![image-20221020193838224](SLAM&SFM.assets/image-20221020193838224.png)

![image-20221020194053315](SLAM&SFM.assets/image-20221020194053315.png)

![image-20221020200512142](SLAM&SFM.assets/image-20221020200512142.png)

### 4.2 图像

![image-20221020201236382](SLAM&SFM.assets/image-20221020201236382.png)

![image-20221020201622367](SLAM&SFM.assets/image-20221020201622367.png)

![image-20221020201708150](SLAM&SFM.assets/image-20221020201708150.png)

## 5.非线性优化

### 5.1 状态估计问题

#### 5.1.1 最大后验与最大似然

![image-20221031205050879](SLAM&SFM.assets/image-20221031205050879.png)

![image-20221031205557943](SLAM&SFM.assets/image-20221031205557943.png)

#### 5.1.2 最小二乘的引出

![image-20221031210514618](SLAM&SFM.assets/image-20221031210514618.png)

![image-20221031210955314](SLAM&SFM.assets/image-20221031210955314.png)

### 5.2 非线性最小二乘

![image-20221031212754131](SLAM&SFM.assets/image-20221031212754131.png)

#### 5.2.1一阶和二阶梯度法

![image-20221104172045319](SLAM&SFM.assets/image-20221104172045319.png)

#### 5.2.2 Gauss-Newton

![image-20221104172140864](SLAM&SFM.assets/image-20221104172140864.png)

![image-20221104172532153](SLAM&SFM.assets/image-20221104172532153.png)

![image-20221104172806049](SLAM&SFM.assets/image-20221104172806049.png)

#### 5.2.3 Levenberg-Marquadt

![image-20221104173407426](SLAM&SFM.assets/image-20221104173407426.png)

![image-20221104173820243](SLAM&SFM.assets/image-20221104173820243.png)

![image-20221104174242538](SLAM&SFM.assets/image-20221104174242538.png)

### 5.3 Ceres

![image-20221108172507700](SLAM&SFM.assets/image-20221108172507700.png)

![image-20221108172526643](SLAM&SFM.assets/image-20221108172526643.png)

### 5.4 g2o

![image-20221108195323152](SLAM&SFM.assets/image-20221108195323152.png)

#### 5.4.1 图优化理论简介

![image-20221108195439986](SLAM&SFM.assets/image-20221108195439986.png)

![image-20221108195607065](SLAM&SFM.assets/image-20221108195607065.png)

![image-20221108195650710](SLAM&SFM.assets/image-20221108195650710.png)

#### 5.4.2 使用g2o拟合曲线

![image-20221108195854962](SLAM&SFM.assets/image-20221108195854962.png)

![image-20221108195927990](SLAM&SFM.assets/image-20221108195927990.png)

![image-20221108200035252](SLAM&SFM.assets/image-20221108200035252.png)

![image-20221108200107438](SLAM&SFM.assets/image-20221108200107438.png)

## 6.视觉里程计

### 6.1 特征点法

![image-20221109205525984](SLAM&SFM.assets/image-20221109205525984.png)

#### 6.1.1 特征点

![image-20221109210018576](SLAM&SFM.assets/image-20221109210018576.png)

![image-20221109210227994](SLAM&SFM.assets/image-20221109210227994.png)

![image-20221109210443322](SLAM&SFM.assets/image-20221109210443322.png)

#### 6.1.2 ORB特征

![image-20221109210611453](SLAM&SFM.assets/image-20221109210611453.png)

**FAST关键点**

![image-20221109210953144](SLAM&SFM.assets/image-20221109210953144.png)

![image-20221109211333553](SLAM&SFM.assets/image-20221109211333553.png)

**BRIEF描述子**

![image-20221109211405838](SLAM&SFM.assets/image-20221109211405838.png)

![image-20221109211618939](SLAM&SFM.assets/image-20221109211618939.png)

#### 6.13 特征匹配

![image-20221109211721509](SLAM&SFM.assets/image-20221109211721509.png)

![image-20221109211901920](SLAM&SFM.assets/image-20221109211901920.png)

### 6.2 计算相机运动

![image-20221116201554761](SLAM&SFM.assets/image-20221116201554761.png)

### 6.3 2D-2D: 对极几何

#### 6.3.1 对极约束

![image-20221116201759043](SLAM&SFM.assets/image-20221116201759043.png)

![image-20221116201932086](SLAM&SFM.assets/image-20221116201932086.png)

![image-20221116201954205](SLAM&SFM.assets/image-20221116201954205.png)

![image-20221116202443845](SLAM&SFM.assets/image-20221116202443845.png)

![image-20221116203112832](SLAM&SFM.assets/image-20221116203112832.png)

![image-20221116203207169](SLAM&SFM.assets/image-20221116203207169.png)

#### 6.3.2 本质矩阵

![image-20221116204111368](SLAM&SFM.assets/image-20221116204111368.png)

![image-20221116204503598](SLAM&SFM.assets/image-20221116204503598.png)

![image-20221116204725418](SLAM&SFM.assets/image-20221116204725418.png)

#### 6.3.3 单应矩阵

![image-20221116204930974](SLAM&SFM.assets/image-20221116204930974.png)

![image-20221116205242106](SLAM&SFM.assets/image-20221116205242106.png)

![image-20221116205441042](SLAM&SFM.assets/image-20221116205441042.png)

### 6.4 对极约束求解相机运动

![image-20221117204355076](SLAM&SFM.assets/image-20221117204355076.png)

![image-20221117204430206](SLAM&SFM.assets/image-20221117204430206.png)

**尺度不确定性**

![image-20221117204648991](SLAM&SFM.assets/image-20221117204648991.png)

**初始化的纯旋转问题**

![image-20221117204802375](SLAM&SFM.assets/image-20221117204802375.png)

**多于8对点的情况**

![image-20221117204940366](SLAM&SFM.assets/image-20221117204940366.png)

![image-20221117205004124](SLAM&SFM.assets/image-20221117205004124.png)

### 6.5 三角测量

![image-20221117205208687](SLAM&SFM.assets/image-20221117205208687.png)

![image-20221117205226301](SLAM&SFM.assets/image-20221117205226301.png)

![image-20221117205443660](SLAM&SFM.assets/image-20221117205443660.png)

![image-20221117210407725](SLAM&SFM.assets/image-20221117210407725.png)

### 6.6 实践: 三角测量

![image-20221117214631316](SLAM&SFM.assets/image-20221117214631316.png)

![image-20221117214650731](SLAM&SFM.assets/image-20221117214650731.png)

![image-20221117214759906](SLAM&SFM.assets/image-20221117214759906.png)

### 6.7 3D-2D: Pnp

![image-20221118105251568](SLAM&SFM.assets/image-20221118105251568.png)

#### 6.7.1 直接线性变换

![image-20221118105349364](SLAM&SFM.assets/image-20221118105349364.png)

![image-20221118105716596](SLAM&SFM.assets/image-20221118105716596.png)

![image-20221118110011600](SLAM&SFM.assets/image-20221118110011600.png)

#### 6.7.2 P3P

![image-20221118110328720](SLAM&SFM.assets/image-20221118110328720.png)

![image-20221118110847830](SLAM&SFM.assets/image-20221118110847830.png)

![image-20221118112058866](SLAM&SFM.assets/image-20221118112058866.png)

#### 6.7.3 最小化重投影误差求解 PnP

![image-20221118112722981](SLAM&SFM.assets/image-20221118112722981.png)

![image-20221118113105980](SLAM&SFM.assets/image-20221118113105980.png)

![image-20221118113940497](SLAM&SFM.assets/image-20221118113940497.png)

![image-20221118114335999](SLAM&SFM.assets/image-20221118114335999.png)

### 6.8 实践: 求解 PnP

![image-20221121183524066](SLAM&SFM.assets/image-20221121183524066.png)

### 6.9 3D-3D: ICP

![image-20221121184247294](SLAM&SFM.assets/image-20221121184247294.png)

#### 6.9.1 SVD方法

![image-20221121184339286](SLAM&SFM.assets/image-20221121184339286.png)

![image-20221121184754696](SLAM&SFM.assets/image-20221121184754696.png)

![image-20221121185538663](SLAM&SFM.assets/image-20221121185538663.png)

#### 6.9.2 非线性优化方法

![image-20221121185810866](SLAM&SFM.assets/image-20221121185810866.png)

![image-20221121191913611](SLAM&SFM.assets/image-20221121191913611.png)

### 6.10 实践：求解ICP

![image-20221122091058301](SLAM&SFM.assets/image-20221122091058301.png)

## 7.视觉里程计2

### 7.1 直接法的引出

![image-20221122201908862](SLAM&SFM.assets/image-20221122201908862.png)

![image-20221122201942401](SLAM&SFM.assets/image-20221122201942401.png)

### 7.2 2D光流

![image-20221122202152591](SLAM&SFM.assets/image-20221122202152591.png)

**Lucas-Kanande 光流**

![image-20221122202335371](SLAM&SFM.assets/image-20221122202335371.png)

![image-20221122202902212](SLAM&SFM.assets/image-20221122202902212.png)

![image-20221122203006172](SLAM&SFM.assets/image-20221122203006172.png)

### 7.3 实践： LK光流

![image-20221122221342209](SLAM&SFM.assets/image-20221122221342209.png)

![image-20221122222444909](SLAM&SFM.assets/image-20221122222444909.png)

![image-20221122222639189](SLAM&SFM.assets/image-20221122222639189.png)

**小结**

![image-20221123222349816](SLAM&SFM.assets/image-20221123222349816.png)

### 7.4 直接法

![image-20221123222858138](SLAM&SFM.assets/image-20221123222858138.png)

#### 7.4.1 直接法的推导

![image-20221123223016954](SLAM&SFM.assets/image-20221123223016954.png)

![image-20221124200556795](SLAM&SFM.assets/image-20221124200556795.png)

![image-20221125151411353](SLAM&SFM.assets/image-20221125151411353.png)

![image-20221125151438223](SLAM&SFM.assets/image-20221125151438223.png)

#### 7.4.2 直接法的讨论

![image-20221125151648068](SLAM&SFM.assets/image-20221125151648068.png)

### 7.5 实践： 直接法

![image-20221126165018543](SLAM&SFM.assets/image-20221126165018543.png)

![image-20221126165154597](SLAM&SFM.assets/image-20221126165154597.png)

**直接法优缺点总结**

![image-20221126165332930](SLAM&SFM.assets/image-20221126165332930.png)

![image-20221126165442205](SLAM&SFM.assets/image-20221126165442205.png)

## 8.后端1

### 8.1 概述

#### 8.1.1 状态估计的概率解释

![image-20221128193927400](SLAM&SFM.assets/image-20221128193927400.png)

![image-20221128194311510](SLAM&SFM.assets/image-20221128194311510.png)

![image-20221128195526355](SLAM&SFM.assets/image-20221128195526355.png)

#### 8.1.2 线性系统和KF

![image-20221128200255023](SLAM&SFM.assets/image-20221128200255023.png)

![image-20221128201204500](SLAM&SFM.assets/image-20221128201204500.png)

--------------------------------------------------------------------------------------------------------------------------------------

**A.3 复合的例子**

![image-20221128201419819](SLAM&SFM.assets/image-20221128201419819.png)

![image-20221128201445154](SLAM&SFM.assets/image-20221128201445154.png)

--------------------------------------------------------------------------------------------------------------------------------------

![image-20221128202018917](SLAM&SFM.assets/image-20221128202018917.png)

![image-20221128202336307](SLAM&SFM.assets/image-20221128202336307.png)

#### 8.1.3 非线性系统和EKF

![image-20221128203303327](SLAM&SFM.assets/image-20221128203303327.png)

![image-20221128203709749](SLAM&SFM.assets/image-20221128203709749.png)

#### 8.1.4 EKF的讨论

![image-20221128204210712](SLAM&SFM.assets/image-20221128204210712.png)

![image-20221128204303219](SLAM&SFM.assets/image-20221128204303219.png)

### 8.2 BA与图优化

![image-20221130202420349](SLAM&SFM.assets/image-20221130202420349.png)

#### 8.2.1 投影模型和BA代价函数

![image-20221130202644827](SLAM&SFM.assets/image-20221130202644827.png)

![image-20221130203231839](SLAM&SFM.assets/image-20221130203231839.png)

#### 8.2.2 BA的求解

![image-20221130203408481](SLAM&SFM.assets/image-20221130203408481.png)

![image-20221130203857921](SLAM&SFM.assets/image-20221130203857921.png)

![image-20221130204000495](SLAM&SFM.assets/image-20221130204000495.png)

#### 8.2.3 稀疏性和边缘化

![image-20221130204346725](SLAM&SFM.assets/image-20221130204346725.png)

![image-20221130204750600](SLAM&SFM.assets/image-20221130204750600.png)

![image-20221130210148103](SLAM&SFM.assets/image-20221130210148103.png)

![image-20221130210721389](SLAM&SFM.assets/image-20221130210721389.png)

![image-20221130211136134](SLAM&SFM.assets/image-20221130211136134.png)

![image-20221130211624564](SLAM&SFM.assets/image-20221130211624564.png)

![image-20221130211825610](SLAM&SFM.assets/image-20221130211825610.png)

#### 8.2.4 鲁棒核函数

![image-20221227190813720](SLAM&SFM.assets/image-20221227190813720.png)

![image-20221227191027025](SLAM&SFM.assets/image-20221227191027025.png)

**小结**

![image-20221227191116233](SLAM&SFM.assets/image-20221227191116233.png)

![image-20221227191149981](SLAM&SFM.assets/image-20221227191149981.png)

### 8.3 小结

![image-20230105194246687](SLAM&SFM.assets/image-20230105194246687.png)

![image-20230105194337851](SLAM&SFM.assets/image-20230105194337851.png)

## 9.后端2

### 9.1滑动窗口滤波和优化

#### 9.1.1 实际环境下的BA结构

![image-20230207220319825](SLAM&SFM.assets/image-20230207220319825.png)

![image-20230207220356904](SLAM&SFM.assets/image-20230207220356904.png)

#### 9.1.2 滑动窗口法

![image-20230207220816743](SLAM&SFM.assets/image-20230207220816743.png)

![image-20230207221454519](SLAM&SFM.assets/image-20230207221454519.png)

![image-20230207222013808](SLAM&SFM.assets/image-20230207222013808.png)

### 9.2 位姿图

#### 9.2.1 位姿图的意义

![image-20230209221628786](SLAM&SFM.assets/image-20230209221628786.png)

#### 9.2.2 位姿图的优化

![image-20230209221734726](SLAM&SFM.assets/image-20230209221734726.png)

![image-20230209222957215](SLAM&SFM.assets/image-20230209222957215.png)

![image-20230209223309720](SLAM&SFM.assets/image-20230209223309720.png)

### 小结

![image-20230210165314703](SLAM&SFM.assets/image-20230210165314703.png)

## 10.回环检测

### 10.1 概述

#### 10.1.1 回环检测的意义

![image-20230211151333002](SLAM&SFM.assets/image-20230211151333002.png)

![image-20230211151556783](SLAM&SFM.assets/image-20230211151556783.png)

#### 10.1.2 回环检测的方法

![image-20230211152038648](SLAM&SFM.assets/image-20230211152038648.png)

![image-20230211152153952](SLAM&SFM.assets/image-20230211152153952.png)

#### 10.1.3 准确率和召回率

![image-20230211152316745](SLAM&SFM.assets/image-20230211152316745.png)

![image-20230211152635495](SLAM&SFM.assets/image-20230211152635495.png)

![image-20230211152740753](SLAM&SFM.assets/image-20230211152740753.png)

### 10.2 词袋模型

![image-20230211152841593](SLAM&SFM.assets/image-20230211152841593.png)

![image-20230211153120968](SLAM&SFM.assets/image-20230211153120968.png)

### 10.3 字典

#### 10.3.1 字典的结构

![image-20230211153441429](SLAM&SFM.assets/image-20230211153441429.png)

![image-20230211153612964](SLAM&SFM.assets/image-20230211153612964.png)

![image-20230211153643157](SLAM&SFM.assets/image-20230211153643157.png)

### 10.4 相似度计算

#### 10.4.1 理论部分

![image-20230212102223978](SLAM&SFM.assets/image-20230212102223978.png)

![image-20230212102353606](SLAM&SFM.assets/image-20230212102353606.png)

### 10.5 实验分析与评述

#### 10.5.1 增加字典规模

![image-20230212110323744](SLAM&SFM.assets/image-20230212110323744.png)

#### 10.5.2 相似性评分的处理

![image-20230212112144850](SLAM&SFM.assets/image-20230212112144850.png)

#### 10.5.3 关键帧的处理

![image-20230212112301162](SLAM&SFM.assets/image-20230212112301162.png)

![image-20230212112331863](SLAM&SFM.assets/image-20230212112331863.png)

#### 10.5.4

![image-20230212112448563](SLAM&SFM.assets/image-20230212112448563.png)

#### 10.5.5 与机器学习的关系

![image-20230212112705804](SLAM&SFM.assets/image-20230212112705804.png)

## 11.建图

### 11.1 概述

![image-20230213214656664](SLAM&SFM.assets/image-20230213214656664.png)

![image-20230213220802966](SLAM&SFM.assets/image-20230213220802966.png)

![image-20230213220907801](SLAM&SFM.assets/image-20230213220907801.png)

### 11.2 单目稠密重建

#### 11.2.1 立体视觉

![image-20230213222102978](SLAM&SFM.assets/image-20230213222102978.png)

![image-20230213222300505](SLAM&SFM.assets/image-20230213222300505.png)

#### 11.2.2 极线搜索与块匹配

![image-20230213222822889](SLAM&SFM.assets/image-20230213222822889.png)

![image-20230213223058052](SLAM&SFM.assets/image-20230213223058052.png)

![image-20230213223226520](SLAM&SFM.assets/image-20230213223226520.png)

#### 11.2.3 高斯分布的深度滤波器

![image-20230215202524585](SLAM&SFM.assets/image-20230215202524585.png)

![image-20230215203057615](SLAM&SFM.assets/image-20230215203057615.png)

![image-20230215203812775](SLAM&SFM.assets/image-20230215203812775.png)

### 11.3 实践：单目稠密重建

#### 11.3.1 实验分析与讨论

![image-20230216220522435](SLAM&SFM.assets/image-20230216220522435.png)

![image-20230216220539096](SLAM&SFM.assets/image-20230216220539096.png)

#### 11.3.2 像素梯度的问题

![image-20230216221238539](SLAM&SFM.assets/image-20230216221238539.png)

![image-20230216221519197](SLAM&SFM.assets/image-20230216221519197.png)

#### 11.3.3 逆深度

![image-20230216221704192](SLAM&SFM.assets/image-20230216221704192.png)

![image-20230216221940312](SLAM&SFM.assets/image-20230216221940312.png)

#### 11.3.4 图像间的变换

![image-20230216222319698](SLAM&SFM.assets/image-20230216222319698.png)

![image-20230216222503251](SLAM&SFM.assets/image-20230216222503251.png)

#### 11.3.5 并行化：效率的问题

![image-20230217170609688](SLAM&SFM.assets/image-20230217170609688.png)

#### 11.3.6 其他的改进

![image-20230217170716203](SLAM&SFM.assets/image-20230217170716203.png)

![image-20230217170824513](SLAM&SFM.assets/image-20230217170824513.png)

### 11.4 RGB-D稠密建图

![image-20230217171021692](SLAM&SFM.assets/image-20230217171021692.png)

#### 11.4.1 实践：点云地图

![image-20230217171200827](SLAM&SFM.assets/image-20230217171200827.png)

![image-20230217171222528](SLAM&SFM.assets/image-20230217171222528.png)

![image-20230217172355894](SLAM&SFM.assets/image-20230217172355894.png)

![image-20230217172811911](SLAM&SFM.assets/image-20230217172811911.png)

![image-20230217172932685](SLAM&SFM.assets/image-20230217172932685.png)

#### 11.4.2 从点云重建网格

![image-20230219170617793](SLAM&SFM.assets/image-20230219170617793.png)

![image-20230219170640919](SLAM&SFM.assets/image-20230219170640919.png)

#### 11.4.3 八叉树地图

![image-20230219171056985](SLAM&SFM.assets/image-20230219171056985.png)

![image-20230219171357276](SLAM&SFM.assets/image-20230219171357276.png)

![image-20230219171732996](SLAM&SFM.assets/image-20230219171732996.png)

#### 11.4.4 实践：八叉树地图

![image-20230219171937147](SLAM&SFM.assets/image-20230219171937147.png)

![image-20230219172047486](SLAM&SFM.assets/image-20230219172047486.png)

### 11.5 TSDF地图和Fusion系列

![image-20230220201315022](SLAM&SFM.assets/image-20230220201315022.png)

![image-20230220202403450](SLAM&SFM.assets/image-20230220202403450.png)

![image-20230220202555917](SLAM&SFM.assets/image-20230220202555917.png)

![image-20230220202758845](SLAM&SFM.assets/image-20230220202758845.png)

### 11.6 小结

![image-20230220202959462](SLAM&SFM.assets/image-20230220202959462.png)

## 12.实践：设计SLAM系统

![image-20230220203647739](SLAM&SFM.assets/image-20230220203647739.png)

### 12.1 工程框架

![image-20230220203831014](SLAM&SFM.assets/image-20230220203831014.png)

**确定核心算法结构**

![image-20230220203921369](SLAM&SFM.assets/image-20230220203921369.png)

![image-20230220210902911](SLAM&SFM.assets/image-20230220210902911.png)

![image-20230220211815726](SLAM&SFM.assets/image-20230220211815726.png)

### 12.2 实现

#### 12.2.1 实现基本数据结构

![image-20230220212107901](SLAM&SFM.assets/image-20230220212107901.png)

![image-20230220212142981](SLAM&SFM.assets/image-20230220212142981.png)

![image-20230220212317097](SLAM&SFM.assets/image-20230220212317097.png)

![image-20230220212358008](SLAM&SFM.assets/image-20230220212358008.png)

![image-20230220212431379](SLAM&SFM.assets/image-20230220212431379.png)

![image-20230220212512478](SLAM&SFM.assets/image-20230220212512478.png)

![image-20230220212557195](SLAM&SFM.assets/image-20230220212557195.png)

#### 12.2.2 前端

![image-20230222162630459](SLAM&SFM.assets/image-20230222162630459.png)

#### 12.2.3 后端

![image-20230222170757867](SLAM&SFM.assets/image-20230222170757867.png)

![image-20230222171143734](SLAM&SFM.assets/image-20230222171143734.png)

### 12.3 实验效果

![image-20230224110225740](SLAM&SFM.assets/image-20230224110225740.png)

## 13.SLAM：现在与未来

### 13.1 当前的开源方案

![image-20230227195957354](SLAM&SFM.assets/image-20230227195957354.png)

#### 13.1.1 MonoSLAM

![image-20230227200045259](SLAM&SFM.assets/image-20230227200045259.png)

![image-20230227200254909](SLAM&SFM.assets/image-20230227200254909.png)

#### 13.1.2 PTAM

![image-20230227200347598](SLAM&SFM.assets/image-20230227200347598.png)

![image-20230227200553287](SLAM&SFM.assets/image-20230227200553287.png)

#### 13.1.3 ORB-SLAM

![image-20230227200631205](SLAM&SFM.assets/image-20230227200631205.png)

![image-20230227200816096](SLAM&SFM.assets/image-20230227200816096.png)

![image-20230227201144722](SLAM&SFM.assets/image-20230227201144722.png)

#### 13.1.4 LSD-SLAM

![image-20230227201707519](SLAM&SFM.assets/image-20230227201707519.png)

![image-20230227201745619](SLAM&SFM.assets/image-20230227201745619.png)

#### 13.1.5 SVO

![image-20230227201936145](SLAM&SFM.assets/image-20230227201936145.png)

![image-20230227202140207](SLAM&SFM.assets/image-20230227202140207.png)

#### 13.1.6 RTAB-MAP

![image-20230227202219627](SLAM&SFM.assets/image-20230227202219627.png)

![image-20230227202339559](SLAM&SFM.assets/image-20230227202339559.png)

#### 13.1.7 其他

![image-20230227202413799](SLAM&SFM.assets/image-20230227202413799.png)

### 13.2 未来的SLAM话题

![image-20230227202502882](SLAM&SFM.assets/image-20230227202502882.png)

![image-20230227202542187](SLAM&SFM.assets/image-20230227202542187.png)

#### 13.2.1 视觉+惯性导航SLAM

![image-20230227202827398](SLAM&SFM.assets/image-20230227202827398.png)

![image-20230227202937971](SLAM&SFM.assets/image-20230227202937971.png)

#### 13.2.2 语义SLAM

![image-20230227203058428](SLAM&SFM.assets/image-20230227203058428.png)

![image-20230227203220272](SLAM&SFM.assets/image-20230227203220272.png)

#### 13.2.3 SLAM的未来

![image-20230227203335882](SLAM&SFM.assets/image-20230227203335882.png)

## 附录A 高斯分布的性质

![image-20230227203448997](SLAM&SFM.assets/image-20230227203448997.png)

![image-20230227203519639](SLAM&SFM.assets/image-20230227203519639.png)

![image-20230227203537741](SLAM&SFM.assets/image-20230227203537741.png)

## 附录B 矩阵求导

![image-20230227203610291](SLAM&SFM.assets/image-20230227203610291.png)

![image-20230227203642572](SLAM&SFM.assets/image-20230227203642572.png)

## 附录C ROS入门

![image-20230227203729069](SLAM&SFM.assets/image-20230227203729069.png)

![image-20230227203907019](SLAM&SFM.assets/image-20230227203907019.png)

![image-20230227203929541](SLAM&SFM.assets/image-20230227203929541.png)
