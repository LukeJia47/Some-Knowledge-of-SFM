# CMake使用

## 实例一

### 1.PROJECT

![image-20220829105613534](Cmake.assets/image-20220829105613534.png)

### 2.SET

![image-20220829105717842](Cmake.assets/image-20220829105717842.png)

### 3.MESSAGE

![image-20220829105725155](Cmake.assets/image-20220829105725155.png)

![image-20220829105732660](Cmake.assets/image-20220829105732660.png)

### 4.ADD_EXECUTABLE

![image-20220829105737844](Cmake.assets/image-20220829105737844.png)

![image-20220829105743668](Cmake.assets/image-20220829105743668.png)

### 5.基本语法规则

![image-20220829105748482](Cmake.assets/image-20220829105748482.png)

![image-20220829105754091](Cmake.assets/image-20220829105754091.png)

![image-20220829105759190](Cmake.assets/image-20220829105759190.png)

## 实例二

### 1.ADD_SUBDIRECTORY

![image-20220829105805410](Cmake.assets/image-20220829105805410.png)

换个地方保存目标二进制

![image-20220829113114761](Cmake.assets/image-20220829113114761.png)

### 2.INSTALL指令

![image-20220829105810640](Cmake.assets/image-20220829105810640.png)

![image-20220829105815134](Cmake.assets/image-20220829105815134.png)

![image-20220829105820467](Cmake.assets/image-20220829105820467.png)

CMAKE_INSTALL_PREFIX的常见使用方法如下所示

![image-20220829105824902](Cmake.assets/image-20220829105824902.png)

![image-20220829105829262](Cmake.assets/image-20220829105829262.png)

![image-20220829105838219](Cmake.assets/image-20220829105838219.png)

![image-20220829105845360](Cmake.assets/image-20220829105845360.png)

![image-20220829105850439](Cmake.assets/image-20220829105850439.png)

##  实例三

### 1.ADD_LIBRARY

![image-20220829113611108](Cmake.assets/image-20220829113611108.png)

![image-20220829113718376](Cmake.assets/image-20220829113718376.png)

### 2.SET_TARGET_PROPERTIES

![image-20220829114210276](Cmake.assets/image-20220829114210276.png)

![image-20220829114318664](Cmake.assets/image-20220829114318664.png)

### 3.动态版本号

![image-20220829142252319](Cmake.assets/image-20220829142252319.png)

## 实例四

### 1.make查看细节

```cmake
make VERBOSE=1
```

### 2.INCLUDE_DIRECTORIES

![image-20220829145754876](Cmake.assets/image-20220829145754876.png)

### 3.LINK_DIRECTORIES

![image-20220829150118504](Cmake.assets/image-20220829150118504.png)

### 4.TARGET_LINK_LIBRARIES

![image-20220829150212109](Cmake.assets/image-20220829150212109.png)

![image-20220829150232263](Cmake.assets/image-20220829150232263.png)

### 5.特殊的环境变量CMAKE_INCLUDE_PATH和CMAKE_LIBRARY_PATH

![image-20220829152710516](Cmake.assets/image-20220829152710516.png)

![image-20220829152809853](Cmake.assets/image-20220829152809853.png)

![image-20220829152947262](Cmake.assets/image-20220829152947262.png)

## 常用变量和常用环境变量

### 1.引用方式

![image-20220829170337653](Cmake.assets/image-20220829170337653.png)

### 2.自定义变量的方式

![image-20220829170414941](Cmake.assets/image-20220829170414941.png)

### 3.常用变量

#### 1.CMAKE_BINARY_DIR PROJECT_BINARY_DIR <projectname>_BINARY_DIR

![image-20220829170635364](Cmake.assets/image-20220829170635364.png)

#### 2.CMAKE_SOURCE_DIR PROJECT_SOURCE_DIR <projectname>_SOURCE_DIR

![image-20220829170740170](Cmake.assets/image-20220829170740170.png)

#### 3.CMAKE_CURRENT_SOURCE_DIR

![image-20220829170931775](Cmake.assets/image-20220829170931775.png)

#### 4.CMAKE_CURRENT_BINARY_DIR

![image-20220829174336309](Cmake.assets/image-20220829174336309.png)

#### 5.CMAKE_CURRENT_LIST_FILE

![image-20220829174415608](Cmake.assets/image-20220829174415608.png)

#### 6.CMAKE_CURRENT_LIST_LINE

![image-20220829174450742](Cmake.assets/image-20220829174450742.png)

#### 7.CMAKE_MODULE_PATH

![image-20220829201140450](Cmake.assets/image-20220829201140450.png)

#### 8.EXECUTABLE_OUTPUT_PATH和LIBRARY_OUTPUT_PATH

![image-20220829201241032](Cmake.assets/image-20220829201241032.png)

#### 9.PROJECT_NAME

![image-20220829201305697](Cmake.assets/image-20220829201305697.png)

### 4.cmake调用环境变量的方式

![image-20220829201435887](Cmake.assets/image-20220829201435887.png)

#### 1.CMAKE_INCLUDE_CURRENT_DIR

![image-20220829201537174](Cmake.assets/image-20220829201537174.png)

#### 2.CMAKE_INCLUDE_DIRECTORIES_PROJECT_BEFORE

![image-20220829201622317](Cmake.assets/image-20220829201622317.png)

![image-20220829201633515](Cmake.assets/image-20220829201633515.png)

#### 3.CMAKE_INCLUDE_PATH和CMAKE_LIBRARY_PATH

在上一节已经提及。

### 5.系统信息

![image-20220829201835712](Cmake.assets/image-20220829201835712.png)

### 6.主要的开关项

![image-20220829202024148](Cmake.assets/image-20220829202024148.png)

## cmake常用指令

### 一、基本指令

#### 1.ADD_DEFINITIONS

![image-20220829202343943](Cmake.assets/image-20220829202343943.png)

#### 2.ADD_DEPENDENCIES

![image-20220829202441477](Cmake.assets/image-20220829202441477.png)

#### 3.ADD_EXECUTABLE、ADD_LIBRARY、ADD_SUBDIRECTORY

前面已经介绍。

#### 4.ADD_TEST与ENABLE_TESTING指令

![image-20220829202633932](Cmake.assets/image-20220829202633932.png)

![image-20220829202722093](Cmake.assets/image-20220829202722093.png)

![image-20220829202807235](Cmake.assets/image-20220829202807235.png)

#### 5.AUX_SOURCE_DIRECTORY

![image-20220829202915599](Cmake.assets/image-20220829202915599.png)

#### 6.CMAKE_MINIMUM_REQUIRED

![image-20220829202957413](Cmake.assets/image-20220829202957413.png)

#### 7.EXEC_PROGRAM

![image-20220829203049725](Cmake.assets/image-20220829203049725.png)

![image-20220829203211792](Cmake.assets/image-20220829203211792.png)

#### 8.FILE指令

![image-20220829203310354](Cmake.assets/image-20220829203310354-16617763914711.png)

#### 9.INCLUDE指令

![image-20220829203424392](Cmake.assets/image-20220829203424392.png)

### 二、INSTALL指令

![image-20220829203507062](Cmake.assets/image-20220829203507062.png)

### 三、FIND_指令

![image-20220829203635306](Cmake.assets/image-20220829203635306.png)

FIND_PACKAGE():

https://zhuanlan.zhihu.com/p/97369704

### 四、控制指令

#### 1.IF指令

![image-20220829203826251](Cmake.assets/image-20220829203826251.png)

![image-20220829203847265](Cmake.assets/image-20220829203847265.png)

![image-20220829204046015](Cmake.assets/image-20220829204046015-16617768466122.png)

![image-20220829204154817](Cmake.assets/image-20220829204154817.png)

![image-20220829204232002](Cmake.assets/image-20220829204232002.png)

![image-20220829204259572](Cmake.assets/image-20220829204259572.png)

#### 2.WHILE

![image-20220829204339257](Cmake.assets/image-20220829204339257.png)

#### 3.FOREACH

![image-20220829204427556](Cmake.assets/image-20220829204427556.png)

![image-20220829204545438](Cmake.assets/image-20220829204545438.png)

![image-20220829204608824](Cmake.assets/image-20220829204608824.png)

![image-20220829204649078](Cmake.assets/image-20220829204649078.png)

